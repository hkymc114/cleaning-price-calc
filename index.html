<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç™½æ´‹èˆã€€ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°æ–™é‡‘è¨ˆç®—ï¼ˆåŠ å·¥å¯¾å¿œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰ˆï¼‰</title>
  <style>
    :root{
      --bg:#f4f8fb;--card:#ffffff;--line:#d8e2ee;--muted:#6b7a90;--accent:#0b6dd6;--accent-2:#e6f0f8;--danger:#b00020;
      --chip-bg:#eef5ff;--chip-text:#084c9e;--shadow:0 6px 24px rgba(15,35,65,.06);
    }
    *{box-sizing:border-box}
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans JP", sans-serif; padding: 20px; margin: 0; background-color: var(--bg); color:#0b1220; }
    h1 { font-size: 1.4em; margin: 0 0 12px; }

    .toolbar { background: var(--card); border: 1px solid var(--line); border-radius: 12px; padding: 14px; box-shadow: var(--shadow); }
    .form-group { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
    label{font-size:.95em; color:#0f2748}
    select, button, input[type="search"] { font-size: 1em; padding: 12px 14px; border:1px solid var(--line); border-radius: 10px; background:#fff; }
    button { cursor: pointer; }
    .btn-primary{ background: var(--accent); color:#fff; border: none; }
    .btn-ghost{ background:#fff; color:#0b1220; }
    .btn-danger{ background: var(--danger); color:#fff; border:none; }

    table { border-collapse: collapse; width: 100%; margin-top: 14px; overflow-x: auto; background: var(--card); border:1px solid var(--line); border-radius: 12px; box-shadow: var(--shadow); }
    thead th { position: sticky; top: 0; background: #f8fbff; }
    th, td { border-bottom: 1px solid var(--line); padding: 10px; text-align: left; font-size: 0.95em; white-space: nowrap; }
    th:nth-child(1), td:nth-child(1){min-width:180px}
    th:nth-child(4), td:nth-child(4){min-width:220px}

    .chips{display:flex; flex-wrap:wrap; gap:6px; align-items:center}
    .chip{background:var(--chip-bg); color:var(--chip-text); padding:4px 8px; border-radius:999px; font-size:.85em; border:1px solid #d3e5ff}

    #summary { margin-top: 10px; font-weight: bold; font-size: 1.05em; }
    #total { font-weight: bold; font-size: 1.2em; }

    .actions{display:flex; gap:8px}

    @media (min-width: 720px) { select, button, input[type="search"] { flex: initial; } .form-group { flex-wrap: nowrap; } }

    #itemSearch { width: clamp(220px, 35vw, 420px); }

    .section { margin-top: 12px; display:flex; gap:10px; align-items:center }

    .accordion-container { border: 1px solid var(--line); border-radius: 12px; background: var(--card); padding: 12px; box-shadow: var(--shadow); }
    .accordion-item { margin-bottom: 8px; border-bottom: 1px dashed var(--line); }
    .accordion-header { cursor: pointer; font-weight: 600; padding: 8px; background: var(--accent-2); border-radius: 8px; }
    .accordion-body { padding: 10px; display: none; background: #ffffff; border-left: 3px solid var(--accent); margin-top: 4px; white-space: pre-line; border-radius: 8px; }

    /* ãƒ‰ãƒ­ãƒ¯ãƒ¼ */
    .drawer-overlay{ position: fixed; inset:0; background: rgba(4,18,35,.35); display:none; z-index: 40; }
    .drawer{ position: fixed; top:0; right:-460px; width:min(92vw,440px); height:100vh; background:#fff; box-shadow:-8px 0 30px rgba(12,24,48,.12); border-left:1px solid var(--line); z-index: 41; transition: right .25s ease; display:flex; flex-direction:column }
    .drawer.open{ right:0 }
    .drawer-header{ padding:16px; border-bottom:1px solid var(--line); display:flex; justify-content:space-between; align-items:center }
    .drawer-title{ font-size:1.05em; font-weight:700 }
    .drawer-body{ padding:14px; overflow:auto; }
    .drawer-footer{ padding:12px; border-top:1px solid var(--line); display:flex; gap:8px; justify-content:flex-end }

    .proc-group{ margin-bottom:14px; }
    .proc-title{ font-weight:700; margin-bottom:8px }
    .proc-row{ display:flex; justify-content:space-between; gap:10px; align-items:center; padding:8px 10px; border:1px solid var(--line); border-radius:10px; background:#fafcff }
    .proc-row.disabled{ opacity:.5 }
    .proc-meta{ font-size:.85em; color:var(--muted) }
    .proc-controls{ display:flex; gap:8px; align-items:center }
    .hint{ font-size:.85em; color:var(--muted) }

    .kbd{ font-family: ui-monospace, SFMono-Regular, Menlo, monospace; background:#f1f5fb; border:1px solid #e2e8f0; padding:2px 6px; border-radius:6px }

    footer{ text-align:center; font-size: .8em; color:#6a7492; margin-top: 26px; }
  </style>
</head>
<body>
  <h1>ç™½æ´‹èˆ æ–™é‡‘ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ï¼ˆåŠ å·¥å¯¾å¿œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰ˆï¼‰</h1>

  <div class="toolbar">
    <div class="form-group">
      <label for="itemSearch">ğŸ” å“åæ¤œç´¢:</label>
      <input id="itemSearch" type="search" list="itemSuggestions" placeholder="å“åã‚’å…¥åŠ›ã—ã¦é¸æŠ" />
      <datalist id="itemSuggestions"></datalist>

      <label for="typeSelect">ç¨®åˆ¥:</label>
      <select id="typeSelect">
        <option value="ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘">ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘</option>
        <option value="ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘">ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘</option>
        <option value="ç´ æåˆ¥æ–™é‡‘">ç´ æåˆ¥æ–™é‡‘</option>
        <option value="ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘">ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘</option>
        <option value="å’Œæ´—æ–™é‡‘">å’Œæ´—æ–™é‡‘</option>
        <option value="å¸ƒå›£æ–™é‡‘">å¸ƒå›£æ–™é‡‘</option>
      </select>

      <button id="addSearchBtn" class="btn-primary">æ¤œç´¢ã‹ã‚‰è¿½åŠ </button>
      <button id="resetBtn" class="btn-ghost">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
  </div>

  <div class="section hint">è¿½åŠ å¾Œã«å„è¡Œã®<strong>åŠ å·¥ã‚’ç·¨é›†</strong>ã‹ã‚‰è¨­å®šã§ãã¾ã™ã€‚è¡Œã”ã¨ã«åŠ å·¥ã®æœ‰åŠ¹/ç„¡åŠ¹ãŒè‡ªå‹•åˆ¤å®šã•ã‚Œã¾ã™ã€‚</div>

  <table>
    <thead>
      <tr>
        <th>å“ç›®</th>
        <th>ç¨®åˆ¥</th>
        <th>é‡‘é¡ï¼ˆåŸºæº–ï¼‰</th>
        <th>åŠ å·¥</th>
        <th>å°è¨ˆ</th>
        <th>æ“ä½œ</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>

  <p id="summary">åˆè¨ˆé‡‘é¡(ç¨æŠœ): <span id="total">0</span> å††</p>

  <!-- åŠ å·¥ã®èª¬æ˜ï¼ˆæ—¢å­˜ã®ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ï¼‰ -->
  <div style="margin-top: 24px;">
    <h2>å„ç¨®åŠ å·¥ã®ã”æ¡ˆå†…</h2>
    <div class="accordion-container"></div>
  </div>

  <!-- ãƒ‰ãƒ­ãƒ¯ãƒ¼ -->
  <div class="drawer-overlay" id="drawerOverlay"></div>
  <aside class="drawer" id="drawer">
    <div class="drawer-header">
      <div>
        <div class="drawer-title" id="drawerTitle">åŠ å·¥ã®ç·¨é›†</div>
        <div class="hint" id="drawerSubtitle"></div>
      </div>
      <button id="drawerClose" class="btn-ghost">é–‰ã˜ã‚‹</button>
    </div>
    <div class="drawer-body">
      <div class="hint" id="drawerBaseInfo"></div>

      <div class="proc-group">
        <div class="proc-title">50%åŠ ç®—ï¼ˆã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘åŸºæº–ã€æœ€ä½400ï¼ä¸Šé™2500ï¼‰</div>
        <div id="procPercentList" class="proc-list"></div>
      </div>

      <div class="proc-group">
        <div class="proc-title">å›ºå®šé¡</div>
        <div id="procFixedList" class="proc-list"></div>
      </div>

      <div class="proc-group">
        <div class="proc-title">æŠ˜ã‚Šç›®åŠ å·¥</div>
        <div id="procConditionalList" class="proc-list"></div>
      </div>

      <div class="proc-group">
        <div class="proc-title">è¨ˆç®—çµæœ</div>
        <div class="proc-row">
          <div>
            <div>åŠ å·¥å°è¨ˆ</div>
            <div class="hint" id="procCalcNote">â€»ä¸‹é™ãƒ»ä¸Šé™ã‚’é©ç”¨</div>
          </div>
          <div style="font-weight:700">+ <span id="procSubtotal">0</span> å††</div>
        </div>
        <div class="proc-row">
          <div>è¡Œå°è¨ˆï¼ˆåŸºæº–ï¼‹åŠ å·¥ï¼‰</div>
          <div style="font-weight:700"><span id="rowLineTotal">0</span> å††</div>
        </div>
      </div>
    </div>
    <div class="drawer-footer">
      <button class="btn-ghost" id="drawerCancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="btn-primary" id="drawerSave">ä¿å­˜</button>
    </div>
  </aside>

  <footer>
    Â© 2025 ç™½æ´‹èˆæ–™é‡‘è¨ˆç®—ã‚¢ãƒ—ãƒª Ver.1.3.0ï¼ˆåŠ å·¥å¯¾å¿œãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰<br />
    <details style="margin-top: 6px;">
      <summary>ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæƒ…å ±</summary>
      <div style="text-align: left; margin: 0 auto; max-width: 560px;">
        <ul style="padding-left: 1.2em; line-height:1.7;">
          <li>2025/11/03 - Ver.1.3.0 ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ãƒ»å¾©å…ƒã¨è¡Œåˆ¥åŠ å·¥ç·¨é›†ãƒ‰ãƒ­ãƒ¯ãƒ¼ã‚’è©¦é¨“å®Ÿè£…ï¼ˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰</li>
          <li>2025/07/14 - Ver.1.2.1 ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒ ã®å®Ÿè£…</li>
          <li>2025/07/13 - Ver.1.1.0 åŠ å·¥å“ç›®ã®ä¿®æ­£</li>
          <li>2025/07/12 - Ver.1.0.0 åˆç‰ˆãƒªãƒªãƒ¼ã‚¹</li>
        </ul>
      </div>
    </details>
    <div style="font-size: 0.75em; color: #555; text-align: center; margin-top: 10px;">
      <p>
        ç™½æ´‹èˆ å…¬å¼ã‚µã‚¤ãƒˆï¼š
        <a href="https://www.hakuyosha.co.jp/" target="_blank" rel="noopener">https://www.hakuyosha.co.jp/</a>
      </p>
    </div>
  </footer>

  <!-- =============================================
  â–¼â–¼â–¼ ã“ã“ã‹ã‚‰JavaScriptï¼ˆé‡è¦å‡¦ç†ã”ã¨ã®è§£èª¬å…¥ã‚Šï¼‰ â–¼â–¼â–¼
  â€» å„ãƒ–ãƒ­ãƒƒã‚¯ã”ã¨ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã—ã€ã‚³ãƒ¼ãƒ‰å…¨ä½“ã®ç†è§£ã‚’è£œåŠ©
  ============================================= -->
<script>
    // =====================================================
    // â–¼ åŠ å·¥èª¬æ˜ï¼ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ï¼‰
    //   ç›®çš„ï¼šåº—é ­èª¬æ˜ãƒ»å•ã„åˆã‚ã›å¯¾å¿œæ™‚ã«ã€åŠ å·¥ã®æ ¹æ‹ ï¼ˆ%ï¼å›ºå®šï¼æ¡ä»¶ï¼‰ã‚’å¯è¦–åŒ–
    //   å½¹å‰²ï¼šUIä¸Šã®æŠ˜ã‚ŠãŸãŸã¿èª¬æ˜ã®ã¿ã€‚è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã«ã¯é–¢ä¸ã—ãªã„
    //   é‹ç”¨ï¼šæ–‡è¨€å¤‰æ›´ã¯ã“ã“ï¼ˆprocessingDataDescï¼‰ã€‚é‡‘é¡ã‚„è¨ˆç®—æ ¹æ‹ ã¯ä¸‹ã® PROC_MASTER ã‚’ä¿®æ­£
    // =====================================================
    const processingDataDesc = [
      { name: "é˜²è™«åŠ å·¥", description: "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘ã®50ï¼…ã‚’åŠ ç®—ã™ã‚‹ã€‚\nä½†ã—ã€æœ€ä½400å††ã€€ä¸Šé™2500å††" },
      { name: "ã¯ã£æ°´åŠ å·¥", description: "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘ã®50ï¼…ã‚’åŠ ç®—ã™ã‚‹ã€‚\nä½†ã—ã€æœ€ä½400å††ã€€ä¸Šé™2500å††" },
      { name: "æ±—ã™ã£ãã‚ŠåŠ å·¥", description: "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘ã®50ï¼…ã‚’åŠ ç®—ã™ã‚‹ã€‚\nä½†ã—ã€æœ€ä½400å††ã€€ä¸Šé™2500å††" },
      { name: "ãƒãƒªã‚¸ãƒ³ãƒ»ã‚¦ã‚©ãƒƒã‚·ãƒ¥ã‚¤ãƒ³åŠ å·¥â€»", description: "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘ã®50ï¼…ã‚’åŠ ç®—ã™ã‚‹ã€‚\nä½†ã—ã€æœ€ä½400å††ã€€ä¸Šé™2500å††\nâ€»ãµã¨ã‚“ã®ãƒãƒªã‚¸ãƒ³åŠ å·¥ã®å ´åˆ\n1500å††/æš" },
      { name: "ã—ã£ã¨ã‚ŠåŠ å·¥(3ï½6æœˆé™å®š)", description: "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘ã®50ï¼…ã‚’åŠ ç®—ã™ã‚‹ã€‚\nä½†ã—ã€æœ€ä½400å††ã€€ä¸Šé™2500å††" },
      { name: "ãƒªãƒ³ãƒˆãƒ©ã‚¯åŠ å·¥", description: "â€»ã‚¹ã‚«ãƒ¼ãƒˆã€€ãƒªãƒ³ãƒˆãƒ©ã‚¯åŠ å·¥\nãƒ’ãƒ€3æœ¬ã¾ã§ã€€800å††\nãƒ’ãƒ€4æœ¬ï½10æœ¬ã¾ã§ã€€1000å††\nãƒ’ãƒ€11æœ¬ï½30æœ¬ã¾ã§ã€€1500å††\nç·ãƒ—ãƒªãƒ¼ãƒ„ã¯åŠ å·¥ã—ãªã„\nâ€»ã‚¹ãƒ©ãƒƒã‚¯ã‚¹ãƒ»ã‚ºãƒœãƒ³ã€€1000å††" },
      { name: "ã‚·ãƒ­ã‚»ãƒƒãƒˆåŠ å·¥", description: "â€»ã‚¹ãƒ©ãƒƒã‚¯ã‚¹ãƒ»ã‚ºãƒœãƒ³1000å††" },
      { name: "å’Œæœã¯ã£æ°´åŠ å·¥", description: "3500å††" },
      { name: "æ¯›çš®é˜²è™«åŠ å·¥", description: "ã‚³ãƒ¼ãƒˆãƒ»ã‚¸ãƒ£ã‚±ãƒƒãƒˆç­‰ã€€3500å††\nãƒãƒ•ãƒ©ãƒ¼ãƒ»ã‚·ãƒ§ãƒ¼ãƒ«ãƒ»ä»˜å±å“ç­‰ã€€2500å††" },
      { name: "é˜²ãƒ€ãƒ‹åŠ å·¥(æ¯›å¸ƒãƒ»å¸ƒå›£ãƒ»ã˜ã‚…ã†ãŸã‚“ãªã©)", description: "æ¯›å¸ƒã€€ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘ã®50ï¼…ã‚’åŠ ç®—ã™ã‚‹\nãµã¨ã‚“ã€€1500å††\nåº§å¸ƒå›£ã€€600å††\nã˜ã‚…ã†ãŸã‚“ã€€1ã¡ã«ã¤ã400å††\n1ç•³ã«ã¤ã660å††" },
      { name: "é˜²ã‚«ãƒ“åŠ å·¥(ã‚«ãƒ¼ãƒ†ãƒ³ã®ã¿)", description: "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘ã®50ï¼…åŠ ç®—ã€‚\nä½†ã—ã€æœ€ä½400å††ã€€ä¸Šé™2500å††" },
      { name: "é˜²ç‚åŠ å·¥(ã‚«ãƒ¼ãƒ†ãƒ³ã®ã¿)", description: "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘ã®50ï¼…ã‚’åŠ ç®—ã™ã‚‹ã€‚\nä½†ã—ã€æœ€ä½400å††ã€€ä¸Šé™2500å††\né˜²ç‚åŠ å·¥å¯èƒ½è£½å“ã«é™ã‚‹" }
    ];

    const accordionContainer = document.querySelector('.accordion-container');
    processingDataDesc.forEach(item => {
      const wrap = document.createElement('div');
      wrap.className = 'accordion-item';
      const header = document.createElement('div');
      header.className = 'accordion-header';
      header.textContent = item.name;
      const body = document.createElement('div');
      body.className = 'accordion-body';
      body.textContent = item.description;
      header.addEventListener('click', () => {
        body.style.display = (body.style.display === 'block') ? 'none' : 'block';
      });
      wrap.appendChild(header); wrap.appendChild(body); accordionContainer.appendChild(wrap);
    });
  </script>

  <script>
    // =====================================
    // â–¼ å“ç›®ãƒ‡ãƒ¼ã‚¿ï¼ˆé‡è¤‡å‰Šé™¤æ¸ˆãƒ»æ–™é‡‘ãƒã‚¹ã‚¿ï¼‰
    //   ç›®çš„ï¼šç™½æ´‹èˆå…¬å¼æ–™é‡‘è¡¨ã«åŸºã¥ãã€å“ç›®ã¨å„ç¨®æ–™é‡‘ã®å¯¾å¿œã‚’ä¿æŒ
    //   å½¹å‰²ï¼šæ¤œç´¢å€™è£œã‚„åŸºæº–é‡‘é¡ã®å‚ç…§ã«ä½¿ç”¨
    // =====================================
    //  å“ç›®ãƒ‡ãƒ¼ã‚¿ï¼ˆé‡è¤‡å‰Šé™¤æ¸ˆï¼‰
    // ========================
    const items = [
      { "name": "éº»ãƒ¯ã‚¤ã‚·ãƒ£ãƒ„", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 750, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": null, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": null },
      { "name": "ã‚¢ãƒ³ãƒ€ãƒ¼ã‚·ãƒ£ãƒ„", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": null, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": null },
      { "name": "ã‚¦ãƒ¼ãƒ«ä¸¹å‰", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 2700, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": null, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": null },
      { "name": "ã‚¦ãƒ¼ãƒ«è‚Œç€ä¸Š", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ã‚¦ãƒ¼ãƒ«è‚Œç€ä¸‹", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ã‚¦ã‚§ãƒ‡ã‚£ãƒ³ã‚°ãƒ‰ãƒ¬ã‚¹", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": null, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 36000, "ç´ æåˆ¥æ–™é‡‘": null, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": null },
      { "name": "æ‰“æ›", "å’Œæ´—æ–™é‡‘": 26000 },
      { "name": "ç¾½æ¯›å¸ƒå›£", "å¸ƒå›£æ–™é‡‘": 8500, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": null, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": null },
      { "name": "ã‚ªãƒ¼ãƒãƒ¼ã‚ªãƒ¼ãƒ«ãƒ»ã‚µãƒ­ãƒšãƒƒãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1800, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 3600, "ç´ æåˆ¥æ–™é‡‘": 3600, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3600 },
      { "name": "ã‚«ãƒ¼ãƒ‡ã‚£ã‚¬ãƒ³", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ã‚«ãƒ¼ãƒ‡ã‚£ã‚¬ãƒ³è£åœ°ä»˜ã", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1700, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 3400, "ç´ æåˆ¥æ–™é‡‘": 3400, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3400 },
      { "name": "ã‹ã„ã¾ãæ¯›å¸ƒ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1600, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 3200, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3200 },
      { "name": "ã‚¬ã‚¦ãƒ³", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1850, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 3700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3700 },
      { "name": "å­¦ç”Ÿæœä¸Šä¸‹(ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ»ã‚¹ãƒ©ãƒƒã‚¯ã‚¹)", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1800, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 3600, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3600 },
      { "name": "å­¦ç”Ÿæœä¸Šä¸‹(ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ»ã‚¹ã‚«ãƒ¼ãƒˆ)", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1800, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 3600, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3600 },
      { "name": "å­¦ç”Ÿæœä¸Šä¸‹(ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ»ã‚¸ãƒ£ãƒ³ãƒ‘ãƒ¼ã‚¹ã‚«ãƒ¼ãƒˆ)", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 2250, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 4500, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 4500 },
      { "name": "å­¦ç”Ÿæœä¸Šä¸‹(ãƒ™ã‚¹ãƒˆãƒ»ã‚¹ã‚«ãƒ¼ãƒˆ)", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1800, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 3600, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3600 },
      { "name": "å­¦ç”Ÿæœã‚¸ãƒ£ã‚±ãƒƒãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1050, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 2100, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 2100 },
      { "name": "å­¦ç”Ÿæœã‚¸ãƒ£ãƒ³ãƒ‘ãƒ¼ã‚¹ã‚«ãƒ¼ãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1200, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 2400, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 2400 },
      { "name": "å­¦ç”Ÿæœã‚ºãƒœãƒ³", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 750, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 1500, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1500 },
      { "name": "å­¦ç”Ÿæœã‚¹ã‚«ãƒ¼ãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 750, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 1500, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1500 },
      { "name": "å­¦ç”Ÿæœãƒ™ã‚¹ãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 600, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 1200, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1200 },
      { "name": "å­¦ç”Ÿæœãƒªãƒœãƒ³ãƒ»è¶ã‚¿ã‚¤", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 750, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 1500, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1500 },
      { "name": "å­¦ç”Ÿæœãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1200, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 2400, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 2400 },
      { "name": "ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã‚·ãƒ£ãƒ„", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "åŒ–ç¹Šãã‚‚ã®(è¢·)", "å’Œæ´—æ–™é‡‘": 7800 },
      { "name": "åŒ–ç¹Šãã‚‚ã®(å˜)", "å’Œæ´—æ–™é‡‘": 6600 },
      { "name": "ã‚«ãƒƒãƒˆã‚½ãƒ¼", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": null, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ãã‚‚ã®(è¢·)", "å’Œæ´—æ–™é‡‘": 13000 },
      { "name": "ãã‚‚ã®(å˜)", "å’Œæ´—æ–™é‡‘": 11000 },
      { "name": "ã‚³ãƒ¼ãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 2600, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 5200, "ç´ æåˆ¥æ–™é‡‘": 5200, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 5200 },
      { "name": "ã“ãŸã¤å¸ƒå›£", "å¸ƒå›£æ–™é‡‘": 4300 },
      { "name": "ã‚·ãƒ¼ãƒ„ãƒ»ãƒ•ã‚£ãƒƒãƒˆã‚·ãƒ¼ãƒ„", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 750 },
      { "name": "ã‚¸ãƒ¼ãƒ³ã‚º", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 900, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 1800, "ç´ æåˆ¥æ–™é‡‘": 1800, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1800 },
      { "name": "ã‚¸ãƒ£ãƒ³ãƒ‘ãƒ¼", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1700, "ç´ æåˆ¥æ–™é‡‘": 3400, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3400 },
      { "name": "ã‚¸ãƒ£ã‚±ãƒƒãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1700, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 3400, "ç´ æåˆ¥æ–™é‡‘": 3400, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3400 },
      { "name": "ã‚»ãƒ¼ã‚¿ãƒ¼", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ã‚»ãƒ¼ã‚¿ãƒ¼é£¾ã‚Šä»˜ã", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1500, "ç´ æåˆ¥æ–™é‡‘": 3000, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3000 },
      { "name": "ã‚·ãƒ§ãƒ¼ãƒ«", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ã‚¹ãƒ¼ãƒ„(ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ»ã‚¹ã‚«ãƒ¼ãƒˆ)", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 2600, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 5200, "ç´ æåˆ¥æ–™é‡‘": 5200, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 5200 },
      { "name": "ã‚¹ãƒ¼ãƒ„(ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ»ã‚¹ãƒ©ãƒƒã‚¯ã‚¹)", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 2600, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 5200, "ç´ æåˆ¥æ–™é‡‘": 5200, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 5200 },
      { "name": "ã‚¹ãƒ¼ãƒ„ä¸‰æƒ(ã‚¸ãƒ£ã‚±ãƒƒãƒˆãƒ»ã‚¹ãƒ©ãƒƒã‚¯ã‚¹ãƒ»ãƒ™ã‚¹ãƒˆ)", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 3450, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 6900, "ç´ æåˆ¥æ–™é‡‘": 6900, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 6900 },
      { "name": "ã‚¹ã‚¦ã‚§ãƒƒãƒˆã‚·ãƒ£ãƒ„ãƒ»ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ã‚¹ã‚«ãƒ¼ãƒˆ(ãƒŸãƒ‹ãƒ»ã‚¿ã‚¤ãƒˆãƒ»ãƒ•ãƒ¬ã‚¢ãƒ¼)", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 900, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 1800, "ç´ æåˆ¥æ–™é‡‘": 1800, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1800 },
      { "name": "ã‚¹ã‚«ãƒ¼ãƒˆ(ãƒã‚­ã‚·ãƒ»ãƒ—ãƒªãƒ¼ãƒ„)", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1400, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 2800, "ç´ æåˆ¥æ–™é‡‘": 2800, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 2800 },
      { "name": "ã‚¹ã‚«ãƒ¼ãƒˆ(ç·ãƒ—ãƒªãƒ¼ãƒ„)", "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 3200 },
      { "name": "ã‚¹ã‚«ãƒ¼ãƒ•", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ã‚¹ãƒ©ãƒƒã‚¯ã‚¹", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 900, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 1800, "ç´ æåˆ¥æ–™é‡‘": 1800, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1800 },
      { "name": "ã‚¿ã‚ªãƒ«ã‚±ãƒƒãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1200 },
      { "name": "ãƒ€ã‚¦ãƒ³ã‚³ãƒ¼ãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 4800, "ç´ æåˆ¥æ–™é‡‘": 9600, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 9600 },
      { "name": "ãƒ€ã‚¦ãƒ³ã‚¸ãƒ£ã‚±ãƒƒãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 3000, "ç´ æåˆ¥æ–™é‡‘": 6000, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 6000 },
      { "name": "ãƒ€ã‚¦ãƒ³ãƒ™ã‚¹ãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1900, "ç´ æåˆ¥æ–™é‡‘": 3800, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3800 },
      { "name": "ãƒ€ã‚¦ãƒ³è‚©å½“", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1900 },
      { "name": "ä¸¹å‰æ¯›å¸ƒ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1600, "ç´ æåˆ¥æ–™é‡‘": 3200, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3200 },
      { "name": "ä¸¹å‰ç¶¿å…¥ã‚Š", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 2600, "ç´ æåˆ¥æ–™é‡‘": 5200, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 5200 },
      { "name": "ã¡ã‚ƒã‚“ã¡ã‚ƒã‚“ã“", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1700 },
      { "name": "ä¸­æŒ¯è¢–", "å’Œæ´—æ–™é‡‘": 18000 },
      { "name": "Tã‚·ãƒ£ãƒ„", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ãƒ‡ãƒ‹ãƒ ã‚¸ãƒ£ã‚±ãƒƒãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1700, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 3400, "ç´ æåˆ¥æ–™é‡‘": 3400, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3400 },
      { "name": "ç•™è¢–", "å’Œæ´—æ–™é‡‘": 14000 },
      { "name": "é•·ã˜ã‚…ã°ã‚“", "å’Œæ´—æ–™é‡‘": 5500, "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1800 },
      { "name": "ãƒ‹ãƒƒãƒˆã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1700, "ç´ æåˆ¥æ–™é‡‘": 3400, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3400 },
      { "name": "ãƒ‹ãƒƒãƒˆã‚¸ãƒ£ã‚±ãƒƒãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1700, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 3400, "ç´ æåˆ¥æ–™é‡‘": 3400, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3400 },
      { "name": "ãƒ‹ãƒƒãƒˆãƒ™ã‚¹ãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ã¬ã„ãã‚‹ã¿", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 2400 },
      { "name": "ãƒã‚¯ã‚¿ã‚¤", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 650, "ç´ æåˆ¥æ–™é‡‘": 1000 },
      { "name": "ãƒ‘ã‚¸ãƒ£ãƒä¸Šä¸‹", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1700, "ç´ æåˆ¥æ–™é‡‘": 3400, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3400 },
      { "name": "ãƒã‚¹ãƒ­ãƒ¼ãƒ–", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1100 },
      { "name": "è‚Œã˜ã‚…ã°ã‚“", "å’Œæ´—æ–™é‡‘": 1800, "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1800 },
      { "name": "ãƒãƒ«ã‚­ãƒ¼ã‚»ãƒ¼ã‚¿ãƒ¼ãƒ»ã‚ªã‚¤ãƒ«ãƒ‰ã‚»ãƒ¼ã‚¿ãƒ¼", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1500, "ç´ æåˆ¥æ–™é‡‘": 3000, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3000 },
      { "name": "ãƒãƒ³ã‚«ãƒãƒ¼ãƒ•", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ãƒ”ãƒ­ã‚±ãƒ¼ã‚¹", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 600 },
      { "name": "ã²ã‚ˆãä»˜ãç•™è¢–", "å’Œæ´—æ–™é‡‘": 14000 },
      { "name": "å¸ƒå›£ã‚«ãƒãƒ¼", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1000 },
      { "name": "æŒ¯è¢–", "å’Œæ´—æ–™é‡‘": 18000 },
      { "name": "ãƒ™ã‚¹ãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 1700, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "è¨ªå•ç€", "å’Œæ´—æ–™é‡‘": 13000 },
      { "name": "ãƒãƒ­ã‚·ãƒ£ãƒ„", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "å‰ã²ã ãƒ¯ã‚¤ã‚·ãƒ£ãƒ„", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1700 },
      { "name": "ãƒãƒ•ãƒ©ãƒ¼", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 850, "ç´ æåˆ¥æ–™é‡‘": 1700, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 1700 },
      { "name": "ç¶¿ãƒ»åŒ–ç¹Šã‚ãŸå¸ƒå›£", "å¸ƒå›£æ–™é‡‘": 7000 },
      { "name": "æ¯›å¸ƒ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1600, "ç´ æåˆ¥æ–™é‡‘": 3200, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3200 },
      { "name": "æ¯›å¸ƒ(äºŒé‡åˆã‚ã›)", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 3200, "ç´ æåˆ¥æ–™é‡‘": 6400, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 6400 },
      { "name": "å–ªæœ", "å’Œæ´—æ–™é‡‘": 14000 },
      { "name": "ãƒ­ãƒ¼ãƒ¤ãƒ«ãƒ¯ã‚¤ã‚·ãƒ£ãƒ„", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 750 },
      { "name": "ãƒ­ãƒ³ã‚°ã‚«ãƒ¼ãƒ‡ã‚£ã‚¬ãƒ³", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1500, "ç´ æåˆ¥æ–™é‡‘": 3000, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3000 },
      { "name": "ãƒ­ãƒ³ã‚°ã‚»ãƒ¼ã‚¿ãƒ¼", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1500, "ç´ æåˆ¥æ–™é‡‘": 3000, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3000 },
      { "name": "ãƒ­ãƒ³ã‚°ãƒ‹ãƒƒãƒˆãƒ™ã‚¹ãƒˆ", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1500, "ç´ æåˆ¥æ–™é‡‘": 3000, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3000 },
      { "name": "ã‚†ã‹ãŸ(éº»ãƒ»ç¶¿ãƒ»çµ½ãƒ»ç´…æ¢…ç­‰ï¼‰", "å’Œæ´—æ–™é‡‘": 6800 },
      { "name": "ã‚†ã‹ãŸ(å¤–å‡ºç”¨ï¼‰", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 3400, "ç´ æåˆ¥æ–™é‡‘": 6800, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 6800 },
      { "name": "ã‚†ã‹ãŸ(çµã‚Šï¼‰", "å’Œæ´—æ–™é‡‘": 6800 },
      { "name": "ã‚†ã‹ãŸ(å¯å·»ç”¨)", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1050 },
      { "name": "ãƒ¯ã‚¤ã‚·ãƒ£ãƒ„", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 400 },
      { "name": "å’Œæœåœ°ã‚³ãƒ¼ãƒˆ", "ç´ æåˆ¥æ–™é‡‘": 5200, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 5200 },
      { "name": "ãƒ¯ãƒ³ãƒ”ãƒ¼ã‚¹", "ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘": 1800, "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘": 3600, "ç´ æåˆ¥æ–™é‡‘": 3600, "ã‚¯ãƒªã‚¹ã‚¿ãƒ«æ–™é‡‘": 3600 }
    ];

    const typeSelect = document.getElementById("typeSelect");
    const tableBody = document.getElementById("tableBody");
    const totalSpan = document.getElementById("total");
    const itemSuggestions = document.getElementById("itemSuggestions");

    // datalist ç”Ÿæˆ
    items.forEach(item => {
      const option = document.createElement("option");
      option.value = item.name; itemSuggestions.appendChild(option);
    });

    // =====================================================================
    // â–¼ è¡Œç®¡ç† & ä¿å­˜ï¼ˆschema v2ï¼‰
    //   ç›®çš„ï¼šãƒ†ãƒ¼ãƒ–ãƒ«1è¡Œï¼1ä¾é ¼å“ã®çŠ¶æ…‹ï¼ˆåŸºæº–é‡‘é¡ãƒ»åŠ å·¥ãƒ»å°è¨ˆï¼‰ã‚’JSONã§ä¿æŒ
    //   ä»•çµ„ï¼š<tr> ã® data-rowjson ã«è¡ŒçŠ¶æ…‹ã‚’æ ¼ç´ â†’ ç”»é¢æ›´æ–°æ™‚ã¯ã“ã®JSONã‚’å”¯ä¸€ã®çœŸå®Ÿæºã¨ã™ã‚‹
    //   ä¿å­˜ï¼šlocalStorageï¼ˆã‚­ãƒ¼: hakuyosha_fee_sim_v2ï¼‰ã«é…åˆ—ã§æ°¸ç¶šåŒ–ï¼å¾©å…ƒ
    //   æ³¨æ„ï¼šschemaVersion ã‚’ä¸Šã’ãŸå ´åˆã¯ç§»è¡Œå‡¦ç†ãŒå¿…è¦ï¼ˆç¾çŠ¶ã¯ v2 å›ºå®šï¼‰
    // =====================================================================
    const STORAGE_KEY = "hakuyosha_fee_sim_v2"; // v2: processingå¯¾å¿œ

    function getOriginalPriceByName(name){
      const it = items.find(i => i.name === name);
      return it && typeof it["ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘"] === 'number' ? it["ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘"] : null;
    }

    function getPriceByType(item, typeKey){
      return (item && typeof item[typeKey] === 'number') ? item[typeKey] : null;
    }

    function buildRowData(name, typeKey){
      const item = items.find(i => i.name === name);
      if(!item) return null;
      const basePrice = getPriceByType(item, typeKey);
      if(basePrice == null) return null;
      const originalPrice = getOriginalPriceByName(name);
      return {
        name,
        typeKey,                // ä¾‹: "ãƒ­ãƒ¼ãƒ¤ãƒ«æ–™é‡‘"
        basePrice,              // é¸æŠç¨®åˆ¥ã®åŸºæº–é‡‘é¡
        originalPrice,          // %è¨ˆç®—ã®æ¯ä½“ï¼ˆnullå¯ï¼‰
        processing: [],         // å¾Œã§ç·¨é›†
        processingTotal: 0,
        lineTotal: basePrice
      };
    }

    function saveState(){
      try{
        const rows = Array.from(tableBody.querySelectorAll('tr')).map(tr=>{
          return JSON.parse(tr.dataset.rowjson);
        });
        const state = {
          schemaVersion: 2,
          rows,
          selectedType: typeSelect.value,
          lastSearch: document.getElementById('itemSearch').value || ''
        };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
      }catch(e){ console.warn('saveState failed:', e); }
    }

    function loadState(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return;
        const state = JSON.parse(raw);
        if(state.selectedType && [...typeSelect.options].some(o=>o.value===state.selectedType)){
          typeSelect.value = state.selectedType;
        }
        const inp = document.getElementById('itemSearch');
        if(inp && typeof state.lastSearch === 'string') inp.value = state.lastSearch;
        if(Array.isArray(state.rows)){
          tableBody.innerHTML = '';
          state.rows.forEach(r=> addRowFromData(r));
          updateTotal();
        }
      }catch(e){ console.warn('loadState failed:', e); }
    }

    function addRowFromData(rowData){
      const tr = document.createElement('tr');
      tr.dataset.rowjson = JSON.stringify(rowData);
      const chipsHtml = renderChips(rowData.processing);
      tr.innerHTML = `
        <td>${rowData.name}</td>
        <td>${rowData.typeKey.replace('æ–™é‡‘','')}</td>
        <td>${rowData.basePrice}</td>
        <td><div class="chips">${chipsHtml} <button class="btn-ghost kbd editProcBtn">åŠ å·¥ã‚’ç·¨é›†</button></div></td>
        <td class="lineTotal">${rowData.lineTotal}</td>
        <td class="actions"><button class="btn-danger deleteBtn">å‰Šé™¤</button></td>
      `;
      tableBody.appendChild(tr);
    }

    function renderChips(processing){
      if(!processing || processing.length===0) return '<span class="hint">ï¼ˆæœªè¨­å®šï¼‰</span>';
      const maxShow = 3;
      const visible = processing.slice(0, maxShow).map(p=>`<span class="chip">${p.name} +${p.amount}</span>`).join('');
      const rest = processing.length - maxShow;
      return rest>0 ? `${visible}<span class="chip">+${rest}</span>` : visible;
    }

    function updateTotal(){
      let total = 0;
      document.querySelectorAll('#tableBody tr').forEach(row => {
        const data = JSON.parse(row.dataset.rowjson);
        total += Number(data.lineTotal)||0;
        row.querySelector('.lineTotal').textContent = Number(data.lineTotal||0);
        // ãƒãƒƒãƒ—å†æç”»ï¼ˆä»–ã‹ã‚‰æ›´æ–°ã•ã‚ŒãŸå ´åˆã«å‚™ãˆã‚‹ï¼‰
        const chipWrap = row.querySelector('.chips');
        if(chipWrap){ chipWrap.innerHTML = `${renderChips(data.processing)} <button class="btn-ghost kbd editProcBtn">åŠ å·¥ã‚’ç·¨é›†</button>`; }
      });
      totalSpan.textContent = total.toLocaleString();
      saveState();
    }

    // =====================================================
    // â–¼ ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆè¡Œè¿½åŠ ãƒ»å‰Šé™¤ï¼‰
    //   ç›®çš„ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œï¼ˆè¿½åŠ ï¼å‰Šé™¤ï¼ç·¨é›†ï¼‰ã‚’è¡ŒçŠ¶æ…‹JSONã«åæ˜ ã—ã€åˆè¨ˆã‚’å†è¨ˆç®—
    //   ãƒ•ãƒ­ãƒ¼ï¼š
    //     1) è¿½åŠ ï¼šå“åãƒ»ç¨®åˆ¥ã®å¦¥å½“æ€§ã‚’æ¤œè¨¼ â†’ è¡ŒJSONç”Ÿæˆ â†’ ãƒ†ãƒ¼ãƒ–ãƒ«ã¸æç”» â†’ updateTotal()
    //     2) å‰Šé™¤ï¼šå¯¾è±¡è¡Œã‚’remove â†’ updateTotal()
    //     3) ç·¨é›†ï¼šãƒ‰ãƒ­ãƒ¯ãƒ¼ã‚’é–‹ãã€ä¿å­˜æ™‚ã«è¡ŒJSONã‚’å·®ã—æ›¿ãˆ â†’ updateTotal()
    //   æ³¨æ„ï¼šãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³NGæ™‚ã¯ alert ã§å³æ™‚ä¸­æ–­
    // =====================================================
    document.getElementById("addSearchBtn").addEventListener("click", () => {
      const name = document.getElementById("itemSearch").value;
      const typeKey = typeSelect.value;
      const data = buildRowData(name, typeKey);
      if(!name || !items.find(i=>i.name===name)) { alert('è©²å½“ã™ã‚‹å“ç›®ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'); return; }
      if(!data){ alert('ã“ã®ç¨®åˆ¥ã§ã¯é‡‘é¡ãŒæœªè¨­å®šã§ã™ã€‚'); return; }
      addRowFromData(data);
      updateTotal();
    });

    document.getElementById("resetBtn").addEventListener("click", () => {
      tableBody.innerHTML = "";
      localStorage.removeItem(STORAGE_KEY);
      updateTotal();
    });

    tableBody.addEventListener("click", (e) => {
      const tr = e.target.closest('tr');
      if(!tr) return;
      if (e.target.classList.contains("deleteBtn")) {
        tr.remove(); updateTotal(); return;
      }
      if (e.target.classList.contains("editProcBtn")) {
        openDrawerForRow(tr); return;
      }
    });

    typeSelect.addEventListener('change', saveState);
    const itemSearchInput = document.getElementById('itemSearch');
    if(itemSearchInput){ itemSearchInput.addEventListener('input', saveState); itemSearchInput.addEventListener('change', saveState); }

    // =====================================================================
    // â–¼ åŠ å·¥ãƒã‚¹ã‚¿ãƒ¼ï¼†é©ç”¨ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆPROC_MASTERï¼‰
    //   ç›®çš„ï¼šåŠ å·¥ã®â€œè¨ˆç®—ãƒ«ãƒ¼ãƒ«â€ã¨â€œè¡¨ç¤ºæ¡ä»¶â€ã‚’ä¸€å…ƒç®¡ç†
    //   ç¨®åˆ¥ï¼š
    //     - percent    â€¦ ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘Ã—ç‡ï¼ˆä¸‹é™400ï¼ä¸Šé™2500ï¼‰â€»originalPriceãŒç„¡ã‘ã‚Œã°éè¡¨ç¤º
    //     - fixed      â€¦ å›ºå®šé¡
    //     - conditionalâ€¦ æŠ˜ã‚Šç›®åŠ å·¥ãªã©ã®é¸æŠè‚¢æŒ‡å®šï¼ˆãƒ©ãƒ™ãƒ«ã¨é‡‘é¡ã‚’é¸ã¶ï¼‰
    //   è¡¨ç¤ºï¼šisApplicable(row) ãŒ true ã®ã¿ãƒ‰ãƒ­ãƒ¯ãƒ¼ã«è¡¨ç¤ºï¼ˆå“åãƒ»ç¨®åˆ¥ã«åŸºã¥ãï¼‰
    //   å¤‰æ›´ï¼šé‡‘é¡ãƒ»é©ç”¨æ¡ä»¶ã®ä¿®æ­£ã¯ã“ã“ã ã‘ã§å®Œçµï¼ˆUIå´ã¯è‡ªå‹•åæ˜ ï¼‰
    // =====================================================================
    // calcType: 'percent' | 'fixed' | 'conditional'
    // appliesTo: 'original' | 'none'
    const PROC_MASTER = [
      { code:'P_MOTH', name:'é˜²è™«åŠ å·¥',        calcType:'percent', rate:0.5, min:400, max:2500, appliesTo:'original', isApplicable: (row)=> row.originalPrice!=null },
      { code:'P_WR',   name:'ã¯ã£æ°´åŠ å·¥',      calcType:'percent', rate:0.5, min:400, max:2500, appliesTo:'original', isApplicable: (row)=> row.originalPrice!=null },
      { code:'P_SWEAT',name:'æ±—ã™ã£ãã‚ŠåŠ å·¥',  calcType:'percent', rate:0.5, min:400, max:2500, appliesTo:'original', isApplicable: (row)=> row.originalPrice!=null },
      { code:'P_MOIST',name:'ã—ã£ã¨ã‚ŠåŠ å·¥',    calcType:'percent', rate:0.5, min:400, max:2500, appliesTo:'original', isApplicable: (row)=> row.originalPrice!=null },
      // ãƒãƒªã‚¸ãƒ³ï¼ˆé€šå¸¸ 50%ç³»ï¼‰
      { code:'P_POLY', name:'ãƒãƒªã‚¸ãƒ³ãƒ»ã‚¦ã‚©ãƒƒã‚·ãƒ¥ã‚¤ãƒ³', calcType:'percent', rate:0.5, min:400, max:2500, appliesTo:'original', isApplicable: (row)=> row.originalPrice!=null },
      // ãµã¨ã‚“ã®ãƒãƒªã‚¸ãƒ³ã¯å›ºå®š 1500
      { code:'P_POLY_FUTON', name:'ãƒãƒªã‚¸ãƒ³ï¼ˆãµã¨ã‚“ï¼‰', calcType:'fixed', amount:1500, appliesTo:'none', isApplicable: (row)=> /å¸ƒå›£/.test(row.name) },
      // å’Œæœã¯ã£æ°´ï¼ˆå›ºå®š 3500ï¼‰
      { code:'P_WAFUKU_WR', name:'å’Œæœã¯ã£æ°´åŠ å·¥', calcType:'fixed', amount:3500, appliesTo:'none', isApplicable: (row)=> /ãã‚‚ã®|ç•™è¢–|æŒ¯è¢–|è¨ªå•ç€|é•·ã˜ã‚…ã°ã‚“|ã‚†ã‹ãŸ|æ‰“æ›|å–ªæœ/.test(row.name) || row.typeKey==='å’Œæ´—æ–™é‡‘' },
      // æ¯›çš®é˜²è™«ï¼ˆå›ºå®šï¼šå¤§ç‰©3500/å°ç‰©2500ï¼‰â†’ å¯¾è±¡å“ç›®ãŒç¾è¡Œitemsã«å°‘ãªã„ãŸã‚å¸¸æ™‚éè¡¨ç¤ºã§ã‚‚ã‚ˆã„ãŒã€UIæ¤œè¨¼ã®ãŸã‚æ¡ä»¶ã¯åºƒã‚ã«
      { code:'P_FUR_BIG', name:'æ¯›çš®é˜²è™«ï¼ˆã‚³ãƒ¼ãƒˆãƒ»ã‚¸ãƒ£ã‚±ãƒƒãƒˆç­‰ï¼‰', calcType:'fixed', amount:3500, appliesTo:'none', isApplicable: (row)=> /ã‚³ãƒ¼ãƒˆ|ã‚¸ãƒ£ã‚±ãƒƒãƒˆ/.test(row.name) },
      { code:'P_FUR_SMALL', name:'æ¯›çš®é˜²è™«ï¼ˆãƒãƒ•ãƒ©ãƒ¼ãƒ»ã‚·ãƒ§ãƒ¼ãƒ«ç­‰ï¼‰', calcType:'fixed', amount:2500, appliesTo:'none', isApplicable: (row)=> /ãƒãƒ•ãƒ©ãƒ¼|ã‚·ãƒ§ãƒ¼ãƒ«/.test(row.name) },
      // é˜²ãƒ€ãƒ‹
      { code:'P_MITE_BLANKET', name:'é˜²ãƒ€ãƒ‹ï¼ˆæ¯›å¸ƒï¼š50%ï¼‰', calcType:'percent', rate:0.5, min:400, max:2500, appliesTo:'original', isApplicable: (row)=> /æ¯›å¸ƒ/.test(row.name) && row.originalPrice!=null },
      { code:'P_MITE_FUTON', name:'é˜²ãƒ€ãƒ‹ï¼ˆãµã¨ã‚“ï¼š1500ï¼‰', calcType:'fixed', amount:1500, appliesTo:'none', isApplicable: (row)=> /å¸ƒå›£/.test(row.name) },
      // åº§å¸ƒå›£/ã˜ã‚…ã†ãŸã‚“ã¯å¯¾è±¡å“ç›®ãªã—ã®ãŸã‚ç¾çŠ¶ã¯éé©ç”¨
      // ã‚«ãƒ¼ãƒ†ãƒ³ç³»
      { code:'P_ANTI_MOLD', name:'é˜²ã‚«ãƒ“ï¼ˆã‚«ãƒ¼ãƒ†ãƒ³ã®ã¿ï¼š50%ï¼‰', calcType:'percent', rate:0.5, min:400, max:2500, appliesTo:'original', isApplicable: (row)=> /ã‚«ãƒ¼ãƒ†ãƒ³/.test(row.name) && row.originalPrice!=null },
      { code:'P_FLAME', name:'é˜²ç‚ï¼ˆã‚«ãƒ¼ãƒ†ãƒ³ã®ã¿ï¼š50%ï¼‰', calcType:'percent', rate:0.5, min:400, max:2500, appliesTo:'original', isApplicable: (row)=> /ã‚«ãƒ¼ãƒ†ãƒ³/.test(row.name) && row.originalPrice!=null },
      // ãƒªãƒ³ãƒˆãƒ©ã‚¯ï¼ˆæ¡ä»¶é¸æŠï¼‰
      { code:'C_RINTORAKU', name:'ãƒªãƒ³ãƒˆãƒ©ã‚¯ï¼ˆã‚¹ã‚«ãƒ¼ãƒˆ/ã‚¹ãƒ©ãƒƒã‚¯ã‚¹ï¼‰', calcType:'conditional', appliesTo:'none', isApplicable: (row)=> /ã‚¹ã‚«ãƒ¼ãƒˆ|ã‚¹ãƒ©ãƒƒã‚¯ã‚¹|ã‚ºãƒœãƒ³/.test(row.name),
        options:[
          { key:'skirt_pleats_3',   label:'ã‚¹ã‚«ãƒ¼ãƒˆ ãƒ’ãƒ€3æœ¬ã¾ã§', amount:800 },
          { key:'skirt_pleats_4_10',label:'ã‚¹ã‚«ãƒ¼ãƒˆ ãƒ’ãƒ€4ã€œ10æœ¬', amount:1000 },
          { key:'skirt_pleats_11_30',label:'ã‚¹ã‚«ãƒ¼ãƒˆ ãƒ’ãƒ€11ã€œ30æœ¬', amount:1500 },
          { key:'pants',            label:'ã‚¹ãƒ©ãƒƒã‚¯ã‚¹ãƒ»ã‚ºãƒœãƒ³', amount:1000 }
        ]
      },
      { code:'C_SHIROSET', name:'ã‚·ãƒ­ã‚»ãƒƒãƒˆï¼ˆã‚¹ãƒ©ãƒƒã‚¯ã‚¹ãƒ»ã‚ºãƒœãƒ³ï¼‰', calcType:'conditional', appliesTo:'none', isApplicable: (row)=> /ã‚¹ãƒ©ãƒƒã‚¯ã‚¹|ã‚ºãƒœãƒ³/.test(row.name),
        options:[ { key:'pants', label:'ã‚·ãƒ­ã‚»ãƒƒãƒˆåŠ å·¥', amount:1000 } ]
      }
    ];

    // --- è¨ˆç®—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼šï¼…ç³»ã®é‡‘é¡ç®—å‡ºï¼ˆä¸‹é™400ï¼ä¸Šé™2500ã‚’é©ç”¨ï¼‰
    function computePercent(original, rate, min, max){
      if(original==null) return {amount:0, note:'ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘ãŒæœªè¨­å®šã®ãŸã‚é©ç”¨ä¸å¯'};
      let val = Math.round(original * rate);
      if (typeof min==='number' && val < min) val = min;
      if (typeof max==='number' && val > max) val = max;
      return {amount: val, note:`ã‚ªãƒªã‚¸ãƒŠãƒ«${original}Ã—${Math.round(rate*100)}%ï¼ˆä¸‹é™/ä¸Šé™é©ç”¨ï¼‰`};
    }

    // =====================================================
    // â–¼ ãƒ‰ãƒ­ãƒ¯ãƒ¼åˆ¶å¾¡
    //   ç›®çš„ï¼šè¡Œå˜ä½ã§åŠ å·¥ã‚’ç·¨é›†ã™ã‚‹ãƒ¢ãƒ¼ãƒ‰ã‚’æä¾›ï¼ˆå³ã‚¹ãƒ©ã‚¤ãƒ‰ã®ç·¨é›†UIï¼‰
    //   æµã‚Œï¼š
    //     openDrawerForRow â†’ renderProcessingUIï¼ˆé©ç”¨å¯èƒ½åŠ å·¥ã ã‘ç”Ÿæˆï¼‰â†’
    //     gatherDrawerSelectionï¼ˆé¸æŠå€¤åé›†ï¼‰â†’ recalcDrawerTotalsï¼ˆå°è¨ˆè©¦ç®—ï¼‰â†’ ä¿å­˜
    //   æ³¨æ„ï¼šä¿å­˜æ™‚ã®ã¿è¡ŒJSONã‚’æ›¸ãæ›ãˆã€‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ã¯å¤‰æ›´ã‚’ç ´æ£„
    // =====================================================
    const drawer = document.getElementById('drawer');
    const overlay = document.getElementById('drawerOverlay');
    const drawerClose = document.getElementById('drawerClose');
    const drawerCancel = document.getElementById('drawerCancel');
    const drawerSave = document.getElementById('drawerSave');

    let currentRowEl = null; // ç·¨é›†å¯¾è±¡è¡Œ

    function openDrawerForRow(tr){
      currentRowEl = tr;
      const data = JSON.parse(tr.dataset.rowjson);
      document.getElementById('drawerTitle').textContent = 'åŠ å·¥ã®ç·¨é›†';
      document.getElementById('drawerSubtitle').textContent = `${data.name}ï¼ˆç¨®åˆ¥ï¼š${data.typeKey.replace('æ–™é‡‘','')}ï¼‰`;
      const baseNote = (data.originalPrice!=null)
        ? `ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘ï¼š<strong>${data.originalPrice} å††</strong> ï¼ åŸºæº–é‡‘é¡ï¼ˆ${data.typeKey.replace('æ–™é‡‘','')}ï¼‰ï¼š<strong>${data.basePrice} å††</strong>`
        : `ã‚ªãƒªã‚¸ãƒŠãƒ«æ–™é‡‘ï¼š<strong>æœªè¨­å®š</strong>ï¼ˆï¼…ç³»åŠ å·¥ã¯ç„¡åŠ¹ï¼‰ ï¼ åŸºæº–é‡‘é¡ï¼ˆ${data.typeKey.replace('æ–™é‡‘','')}ï¼‰ï¼š<strong>${data.basePrice} å††</strong>`;
      document.getElementById('drawerBaseInfo').innerHTML = baseNote;

      renderProcessingUI(data);
      recalcDrawerTotals();

      overlay.style.display = 'block';
      setTimeout(()=>{ drawer.classList.add('open'); }, 10);
    }

    function closeDrawer(){
      drawer.classList.remove('open');
      setTimeout(()=>{ overlay.style.display = 'none'; currentRowEl=null; }, 200);
    }

    overlay.addEventListener('click', closeDrawer);
    drawerClose.addEventListener('click', closeDrawer);
    drawerCancel.addEventListener('click', closeDrawer);

    function renderProcessingUI(row){
      const percentWrap = document.getElementById('procPercentList');
      const fixedWrap = document.getElementById('procFixedList');
      const condWrap = document.getElementById('procConditionalList');
      percentWrap.innerHTML = ''; fixedWrap.innerHTML=''; condWrap.innerHTML='';

      // ç¾åœ¨é¸æŠæ¸ˆã¿ã‚’è¾æ›¸åŒ–
      const selected = new Map(row.processing.map(p=>[p.code,p]));

      PROC_MASTER.forEach(def => {
        if(!def.isApplicable(row)) return; // éé©ç”¨ã¯è¡¨ç¤ºã—ãªã„
        if(def.calcType==='percent' || def.calcType==='fixed'){
          const isChecked = selected.has(def.code);
          const amount = isChecked ? selected.get(def.code).amount : estimateAmount(def, row).amount;
          const note = isChecked ? (selected.get(def.code).note||'') : (estimateAmount(def,row).note||'');
          const node = document.createElement('div');
          node.className = 'proc-row';
          node.innerHTML = `
            <div>
              <label style="display:flex; gap:8px; align-items:center;">
                <input type="checkbox" data-proc-code="${def.code}" ${isChecked? 'checked':''} />
                <span>${def.name}</span>
              </label>
              <div class="proc-meta">${note? note : ''}</div>
            </div>
            <div class="proc-controls">+ <span class="amount" data-amt-for="${def.code}">${amount}</span> å††</div>
          `;
          (def.calcType==='percent' ? percentWrap : fixedWrap).appendChild(node);
        } else if(def.calcType==='conditional'){
          const chosen = selected.get(def.code)?.optionKey || '';
          const amount = selected.get(def.code)?.amount || 0;
          const node = document.createElement('div'); node.className='proc-row';
          const opts = def.options.map(o=>`<option value="${o.key}" ${o.key===chosen?'selected':''}>${o.label}ï¼ˆ+${o.amount}å††ï¼‰</option>`).join('');
          node.innerHTML = `
            <div>
              <label style="display:flex; gap:8px; align-items:center;">
                <input type="checkbox" data-proc-code="${def.code}" ${chosen? 'checked':''} />
                <span>${def.name}</span>
              </label>
              <div class="proc-meta">æ¡ä»¶ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
            </div>
            <div class="proc-controls">
              <select data-proc-opt="${def.code}">
                <option value="">æœªé¸æŠ</option>
                ${opts}
              </select>
            </div>
          `;
          condWrap.appendChild(node);
        }
      });

      // å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆã‚’æŸã­ã¦ãƒªãƒƒã‚¹ãƒ³
      document.querySelectorAll('[data-proc-code]').forEach(el=>{
        el.addEventListener('change', ()=>{ recalcDrawerTotals(); });
      });
      document.querySelectorAll('[data-proc-opt]').forEach(el=>{
        el.addEventListener('change', ()=>{ const cb = el.closest('.proc-row').querySelector('[data-proc-code]'); if(el.value) cb.checked=true; recalcDrawerTotals(); });
      });
    }

    function estimateAmount(def, row){
      if(def.calcType==='fixed') return {amount:def.amount, note:''};
      if(def.calcType==='percent') return computePercent(row.originalPrice, def.rate, def.min, def.max);
      return {amount:0, note:''};
    }

    function gatherDrawerSelection(){
      if(!currentRowEl) return [];
      const data = JSON.parse(currentRowEl.dataset.rowjson);
      const out = [];

      // percent & fixed
      PROC_MASTER.forEach(def=>{
        if(!def.isApplicable(data)) return;
        if(def.calcType==='percent' || def.calcType==='fixed'){
          const cb = document.querySelector(`[data-proc-code="${def.code}"]`);
          if(cb && cb.checked){
            const est = estimateAmount(def, data);
            out.push({ code:def.code, name:def.name, calcType:def.calcType, amount: est.amount, note: est.note });
          }
        }
      });
      // conditional
      PROC_MASTER.filter(d=>d.calcType==='conditional' && d.isApplicable(data)).forEach(def=>{
        const cb = document.querySelector(`[data-proc-code="${def.code}"]`);
        const sel = document.querySelector(`[data-proc-opt="${def.code}"]`);
        if(cb && cb.checked && sel && sel.value){
          const opt = def.options.find(o=>o.key===sel.value);
          if(opt) out.push({ code:def.code, name:def.name, calcType:'conditional', amount: opt.amount, optionKey: opt.key, optionLabel: opt.label });
        }
      });
      return out;
    }

    // --- ãƒ‰ãƒ­ãƒ¯ãƒ¼å†…ã®è©¦ç®—è¡¨ç¤ºï¼šé¸æŠä¸­ã®åŠ å·¥é‡‘é¡åˆè¨ˆã¨è¡Œå°è¨ˆã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
    function recalcDrawerTotals(){
      if(!currentRowEl) return;
      const data = JSON.parse(currentRowEl.dataset.rowjson);
      const selected = gatherDrawerSelection();
      const procSum = selected.reduce((s,p)=> s + (Number(p.amount)||0), 0);
      const lineTotal = (Number(data.basePrice)||0) + procSum;
      document.getElementById('procSubtotal').textContent = procSum;
      document.getElementById('rowLineTotal').textContent = lineTotal;
    }

    drawerSave.addEventListener('click', ()=>{
      if(!currentRowEl) return;
      const selected = gatherDrawerSelection();
      const data = JSON.parse(currentRowEl.dataset.rowjson);
      const procSum = selected.reduce((s,p)=> s + (Number(p.amount)||0), 0);
      data.processing = selected;
      data.processingTotal = procSum;
      data.lineTotal = (Number(data.basePrice)||0) + procSum;
      currentRowEl.dataset.rowjson = JSON.stringify(data);
      updateTotal();
      closeDrawer();
    });

    // =====================================
    // â–¼ åˆæœŸåŒ–
    //   ç›®çš„ï¼šlocalStorage ã®æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒã—ã€å‰å›çŠ¶æ…‹ã‹ã‚‰æ¥­å‹™ã‚’å†é–‹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
    //   å‚™è€ƒï¼šå°†æ¥ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—æ™‚ã¯ schemaVersion ã‚’è¦‹ã¦ç§»è¡Œå‡¦ç†ã‚’è¿½åŠ 
    // =====================================
    (function init(){
      // åˆæœŸå€™è£œã®ãƒ­ãƒ¼ãƒ‰
      loadState();
    })();
  </script>
</body>
</html>
